<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dmodule [
<!ENTITY % ISOEntities PUBLIC "ISO 8879-1986//ENTITIES ISO Character Entities 20030531//EN//XML" "http://www.s1000d.org/S1000D_4-2/ent/ISOEntities">
]>
<dmodule xmlns:dc="http://www.purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.s1000d.org/S1000D_4-2/xml_schema_flat/descript.xsd">
  <identAndStatusSection>
    <dmAddress>
      <dmIdent>
        <dmCode modelIdentCode="S1000DTOOLS" systemDiffCode="A" systemCode="00" subSystemCode="0" subSubSystemCode="5" assyCode="00" disassyCode="00" disassyCodeVariant="A" infoCode="040" infoCodeVariant="A" itemLocationCode="D"/>
        <language languageIsoCode="en" countryIsoCode="CA"/>
        <issueInfo issueNumber="006" inWork="00"/>
      </dmIdent>
      <dmAddressItems>
        <issueDate year="2017" month="11" day="05"/>
        <dmTitle>
          <techName>s1kd-upissue</techName>
          <infoName>Description</infoName>
        </dmTitle>
      </dmAddressItems>
    </dmAddress>
    <dmStatus issueType="changed">
      <security securityClassification="01"/>
      <responsiblePartnerCompany>
        <enterpriseName>khzae.net</enterpriseName>
      </responsiblePartnerCompany>
      <originator>
        <enterpriseName>khzae.net</enterpriseName>
      </originator>
      <applic>
        <displayText>
          <simplePara>All</simplePara>
        </displayText>
      </applic>
      <brexDmRef>
        <dmRef>
          <dmRefIdent>
            <dmCode modelIdentCode="S1000DTOOLS" systemDiffCode="A" systemCode="00" subSystemCode="0" subSubSystemCode="0" assyCode="00" disassyCode="00" disassyCodeVariant="A" infoCode="022" infoCodeVariant="A" itemLocationCode="D"/>
          </dmRefIdent>
        </dmRef>
      </brexDmRef>
      <qualityAssurance>
        <unverified/>
      </qualityAssurance>
      <reasonForUpdate id="rfu-0001">
        <simplePara>Added support for older issue issue info and change XML markup (3.0 and lower).</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0002">
        <simplePara>Added -R option to delete only change markup associated with an RFU. The normal behaviour is now to delete all change markup when upissuing an official module.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0003">
        <simplePara>Added -q option to keep quality assurance information from old issue.</simplePara>
      </reasonForUpdate>
    </dmStatus>
  </identAndStatusSection>
  <content>
    <description>
      <levelledPara>
        <title>General</title>
        <para>The <emphasis>s1kd-upissue</emphasis> tool increases the in-work or issue number of an S1000D data module, publication module, etc.</para>
        <para>Any files using an S1000D-esque naming convention, placing the issue and in-work numbers after the first underscore (_) character, can also be "upissued". Files which do not contain the appropriate S1000D metadata are simply copied.</para>
      </levelledPara>
      <levelledPara>
        <title>Usage</title>
        <para>s1kd-upissue [-viN] [-s &lt;status&gt;] &lt;files&gt;</para>
      </levelledPara>
      <levelledPara>
        <title>Options</title>
        <para>
          <definitionList>
            <definitionListItem>
              <listItemTerm>-v</listItemTerm>
              <listItemDefinition>
                <para>Print the file name of the upissued data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-i</listItemTerm>
              <listItemDefinition>
                <para>Increase the issue number of the data module. By default, the in-work issue is increased.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-s &lt;status&gt;</listItemTerm>
              <listItemDefinition>
                <para>Set the status of the new issue. Default is 'changed'.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-N</listItemTerm>
              <listItemDefinition>
                <para>Omit issue/inwork numbers from filename.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-r</listItemTerm>
              <listItemDefinition>
                <para changeType="modify" reasonForUpdateRefIds="rfu-0002">Keep old RFUs. Normally, when upissuing an offical data module to the first in-work issue, any reasons for update are deleted automatically, along with any change markup attributes on elements. This option prevents their deletion.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem changeType="add" reasonForUpdateRefIds="rfu-0002">
              <listItemTerm>-R</listItemTerm>
              <listItemDefinition>
                <para>Delete only change markup on elements associated with an RFU (by use of the attribute <verbatimText verbatimStyle="vs13">reasonForUpdateRefIds</verbatimText>. Change markup on other elements is ignored.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-I</listItemTerm>
              <listItemDefinition>
                <para>Do not change issue date. Normally, when upissuing to the next inwork or official issue, the issue date is changed to the current date. This option will keep the date of the previous inwork or official issue.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem changeType="add" reasonForUpdateRefIds="rfu-0003">
              <listItemTerm>-q</listItemTerm>
              <listItemDefinition>
                <para>Keep quality assurance information from old issue. Normally, when upissuing an official data module to the first in-work issue, the quality assurance is set back to "unverified". Specify this option to indicate the upissue will not affect the contents of the data module, and so does not require it to be re-verified.</para>
              </listItemDefinition>
            </definitionListItem>
          </definitionList>
        </para>
      </levelledPara>
      <levelledPara>
        <title>Examples</title>
        <levelledPara>
          <title>Data module with issue/inwork in filename</title>
          <para>
            <verbatimText verbatimStyle="vs23">$ ls
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-01_EN-CA.XML

$ s1kd-upissue DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-01_EN-CA.XML
$ ls
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-01_EN-CA.XML
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-02_EN-CA.XML

$ s1kd-upissue \
  -i DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-02_EN-CA.XML
$ ls
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-01_EN-CA.XML
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_000-02_EN-CA.XML
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_001-00_EN-CA.XML</verbatimText>
          </para>
        </levelledPara>
        <levelledPara>
          <title>Data module without issue/inwork in filename</title>
          <para>
            <verbatimText verbatimStyle="vs23">$ ls
DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_EN-US.XML

$ s1kd-metadata DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_EN-CA.XML \
  issueInfo
000-01
$ s1kd-upissue -N DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_EN-CA.XML
$ s1kd-metadata DMC-S1000DTOOLS-A-00-00-00-00A-040A-D_EN-CA.XML \
  issueInfo
000-02</verbatimText>
          </para>
        </levelledPara>
        <levelledPara>
          <title>Non-XML file with issue/inwork in filename</title>
          <para>
            <verbatimText verbatimStyle="vs23">$ ls
TXT-S1000DTOOLS-KHZAE-FOOBAR_000-01_EN-CA.TXT

$ s1kd-upissue TXT-S1000DTOOLS-KHZAE-00001_000-01_EN-CA.TXT
$ ls
TXT-S1000DTOOLS-KHZAE-FOOBAR_000-01_EN-CA.TXT
TXT-S1000DTOOLS-KHZAE-FOOBAR_000-02_EN-CA.TXT</verbatimText>
          </para>
        </levelledPara>
      </levelledPara>
    </description>
  </content>
</dmodule>
