<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dmodule [
<!ENTITY % ISOEntities PUBLIC "ISO 8879-1986//ENTITIES ISO Character Entities 20030531//EN//XML" "http://www.s1000d.org/S1000D_4-0-1/ent/ISOEntities">
]>
<dmodule xmlns:dc="http://www.purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.s1000d.org/S1000D_4-2/xml_schema_flat/descript.xsd">
  <identAndStatusSection>
    <dmAddress>
      <dmIdent>
        <dmCode modelIdentCode="S1000DTOOLS" systemDiffCode="A" systemCode="00" subSystemCode="0" subSubSystemCode="7" assyCode="00" disassyCode="00" disassyCodeVariant="A" infoCode="040" infoCodeVariant="A" itemLocationCode="D"/>
        <language languageIsoCode="en" countryIsoCode="CA"/>
        <issueInfo issueNumber="020" inWork="00"/>
      </dmIdent>
      <dmAddressItems>
        <issueDate year="2018" month="01" day="18"/>
        <dmTitle>
          <techName>s1kd-newdm</techName>
          <infoName>Description</infoName>
        </dmTitle>
      </dmAddressItems>
    </dmAddress>
    <dmStatus issueType="changed">
      <security securityClassification="01"/>
      <responsiblePartnerCompany>
        <enterpriseName>khzae.net</enterpriseName>
      </responsiblePartnerCompany>
      <originator>
        <enterpriseName>khzae.net</enterpriseName>
      </originator>
      <applic>
        <displayText>
          <simplePara>All</simplePara>
        </displayText>
      </applic>
      <brexDmRef>
        <dmRef>
          <dmRefIdent>
            <dmCode modelIdentCode="S1000DTOOLS" systemDiffCode="A" systemCode="00" subSystemCode="0" subSubSystemCode="0" assyCode="00" disassyCode="00" disassyCodeVariant="A" infoCode="022" infoCodeVariant="A" itemLocationCode="D"/>
          </dmRefIdent>
        </dmRef>
      </brexDmRef>
      <qualityAssurance>
        <unverified/>
      </qualityAssurance>
      <reasonForUpdate id="rfu-0001">
        <simplePara>Add crew template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0002">
        <simplePara>Add sb template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0003">
        <simplePara>Add schedul template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0004">
        <simplePara>Add wrngdata template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0005">
        <simplePara>Add wrngflds template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0006">
        <simplePara>Add scocontent template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0007">
        <simplePara>Add techrep template.</simplePara>
      </reasonForUpdate>
      <reasonForUpdate id="rfu-0008">
        <simplePara>Add support for issue 2.3.</simplePara>
      </reasonForUpdate>
    </dmStatus>
  </identAndStatusSection>
  <content>
    <description>
      <levelledPara>
        <title>General</title>
        <para>The <emphasis>s1kd-newdm</emphasis> tool creates a new S1000D data module with the data module code and other metadata specified.</para>
      </levelledPara>
      <levelledPara>
        <title>Usage</title>
        <para>s1kd-newdm [options]</para>
      </levelledPara>
      <levelledPara>
        <title>Options</title>
        <para>
          <definitionList>
            <definitionListItem>
              <listItemTerm>-d &lt;defaults&gt;</listItemTerm>
              <listItemDefinition>
                <para>Specify the 'defaults' file name.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-D &lt;dmtypes&gt;</listItemTerm>
              <listItemDefinition>
                <para>Specify the 'dmtypes' file name.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-p</listItemTerm>
              <listItemDefinition>
                <para>Prompts the user for any values left unspecified.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-# &lt;DMC&gt;</listItemTerm>
              <listItemDefinition>
                <para>The data module code of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-L &lt;language&gt;</listItemTerm>
              <listItemDefinition>
                <para>The language ISO code of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-C &lt;country&gt;</listItemTerm>
              <listItemDefinition>
                <para>The country ISO code of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-n &lt;issue&gt;</listItemTerm>
              <listItemDefinition>
                <para>The issue number of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-w &lt;inwork&gt;</listItemTerm>
              <listItemDefinition>
                <para>The inwork number of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-c &lt;sec&gt;</listItemTerm>
              <listItemDefinition>
                <para>The security classification of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-r &lt;RPC&gt;</listItemTerm>
              <listItemDefinition>
                <para>The responsible partner company enterprise name of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-R &lt;CAGE&gt;</listItemTerm>
              <listItemDefinition>
                <para>The CAGE code of the responsible partner company.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-o &lt;orig&gt;</listItemTerm>
              <listItemDefinition>
                <para>The originator enterprise name of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-O &lt;CAGE&gt;</listItemTerm>
              <listItemDefinition>
                <para>The CAGE code of the originator.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-t &lt;tech&gt;</listItemTerm>
              <listItemDefinition>
                <para>The tech name of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-i &lt;info&gt;</listItemTerm>
              <listItemDefinition>
                <para>The info name of the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-T &lt;schema&gt;</listItemTerm>
              <listItemDefinition>
                <para>The type (schema) of the new data module. Supported schemas:</para>
                <para>
                  <randomList>
                    <listItem>
                      <para>appliccrossreftable - Applicability cross-reference table</para>
                    </listItem>
                    <listItem>
                      <para>brdoc - Business rule document</para>
                    </listItem>
                    <listItem>
                      <para>brex - Business rule exchange</para>
                    </listItem>
                    <listItem>
                      <para>checklist - Maintenance checklist</para>
                    </listItem>
                    <listItem>
                      <para>comrep - Common information repository</para>
                    </listItem>
                    <listItem>
                      <para>condcrossreftable - Conditions cross-reference table</para>
                    </listItem>
                    <listItem>
                      <para>container - Container</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0001">
                      <para>crew - Crew/Operator information</para>
                    </listItem>
                    <listItem>
                      <para>descript - Descriptive</para>
                    </listItem>
                    <listItem>
                      <para>fault - Fault information</para>
                    </listItem>
                    <listItem>
                      <para>frontmatter - Front matter</para>
                    </listItem>
                    <listItem>
                      <para>ipd - Illustrated parts data</para>
                    </listItem>
                    <listItem>
                      <para>learning - Technical training information</para>
                    </listItem>
                    <listItem>
                      <para>prdcrossreftable - Product cross-reference table</para>
                    </listItem>
                    <listItem>
                      <para>proced - Procedural</para>
                    </listItem>
                    <listItem>
                      <para>process - Process</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0002">
                      <para>sb - Service bulletin</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0003">
                      <para>schedul - Maintenance planning information</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0006">
                      <para>scocontent - SCO content information</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0007">
                      <para>techrep - Technical repository (replaced by comrep in issue 4.1)</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0004">
                      <para>wrngdata - Wiring data</para>
                    </listItem>
                    <listItem changeType="add" reasonForUpdateRefIds="rfu-0005">
                      <para>wrngflds - Wiring fields</para>
                    </listItem>
                  </randomList>
                </para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-N</listItemTerm>
              <listItemDefinition>
                <para>Omit issue/inwork numbers from filename.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-b &lt;BREX&gt;</listItemTerm>
              <listItemDefinition>
                <para>BREX data module code.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-v</listItemTerm>
              <listItemDefinition>
                <para>Print the file name of the newly created data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-f</listItemTerm>
              <listItemDefinition>
                <para>Overwrite existing file.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-s &lt;schema&gt;</listItemTerm>
              <listItemDefinition>
                <para>The schema URL.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-S &lt;BREX&gt;</listItemTerm>
              <listItemDefinition>
                <para>Determine the tech name from the SNS rules of a specified BREX data module. This can also be specified in the 'defaults' file with the key 'sns'.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-I &lt;date&gt;</listItemTerm>
              <listItemDefinition>
                <para>Issue date of the new data module in the form of YYYY-MM-DD.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-$ &lt;issue&gt;</listItemTerm>
              <listItemDefinition>
                <para>Specify which issue of S1000D to use. Currently supported issues are:</para>
                <para>
                  <randomList>
                    <listItem>
                      <para>4.2 (default)</para>
                    </listItem>
                    <listItem>
                      <para>4.1</para>
                    </listItem>
                    <listItem>
                      <para>4.0</para>
                    </listItem>
                    <listItem>
                      <para>3.0</para>
                    </listItem>
                    <listItem>
                      <para>2.3</para>
                    </listItem>
                  </randomList>
                </para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-@ &lt;filename&gt;</listItemTerm>
              <listItemDefinition>
                <para>Save the new data module as &lt;filename&gt; instead of an automatically named file in the current directory.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-m &lt;remarks&gt;</listItemTerm>
              <listItemDefinition>
                <para>Set remarks for the new data module.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-,</listItemTerm>
              <listItemDefinition>
                <para>Dumps the built-in default 'dmtypes' XML. This can be used to quickly set up a starting point for a project's custom info codes, from which info names can be modified and unused codes can be removed to fit the project.</para>
              </listItemDefinition>
            </definitionListItem>
            <definitionListItem>
              <listItemTerm>-.</listItemTerm>
              <listItemDefinition>
                <para>Dumps the simple text form of the built-in default 'dmtypes'.</para>
              </listItemDefinition>
            </definitionListItem>
          </definitionList>
        </para>
        <levelledPara>
          <title>Prompt (-p) option</title>
          <para>If this option is specified, the program will prompt the user to enter values for metadata which was not specified when calling the program. If a piece of metadata has a default value (from the 'defaults' and 'dmtypes' files), it will be displayed in square brackets [] in the prompt, and pressing Enter without typing any value will select this default value.</para>
        </levelledPara>
        <levelledPara>
          <title>'defaults' file</title>
          <para>This file sets default values for each piece of metadata. By default, the program will search the current directory for a file named 'defaults', but any file can be specified by using the -d option.</para>
          <para>All of the s1kd-new* commands use the same 'defaults' file format, so this file can contain default values for multiple types of metadata.</para>
          <para>Each line consists of the identifier of a piece of metadata and its default value, separated by whitespace. Lines which do not match a piece of metadata are ignored, and may be used as comments. Example:</para>
          <para>
            <verbatimText verbatimStyle="vs23"># General
modelIdentCode            S1000DTOOLS
securityClassification    01
responsiblePartnerCompany khzae.net
originator                khzae.net
languageIsoCode           en
countryIsoCode            CA
issueNumber               000
inWork                    01

# Data modules
systemDiffCode            A
systemCode                00
subSystemCode             0
subSubSystemCode          0
assyCode                  00
disassyCode               00
disassyCodeVariant        A
infoCode                  040
infoCodeVariant           A
itemLocationCode          D

# Comments/DDN
senderIdent               KHZAE
yearOfDataIssue           2017
seqNumber                 00001
city                      Toronto
country                   Canada

# Comments
commentType               q
commentPriorityCode       cp01

# DDN
authorization             khzae.net

# Publication modules
pmIssuer                  KHZAE
pmNumber                  00001
pmVolume                  00</verbatimText>
          </para>
          <para>Alternatively, the 'defaults' file can be written using an XML format, containing a root element <verbatimText verbatimStyle="vs12">defaults</verbatimText> with child elements <verbatimText verbatimStyle="vs12">default</verbatimText> which each have an attribute <verbatimText verbatimStyle="vs13">ident</verbatimText> and an attribute <verbatimText verbatimStyle="vs13">value</verbatimText>.</para>
          <para>
            <verbatimText verbatimStyle="vs23">&lt;?xml version="1.0"?&gt;
&lt;defaults&gt;
  &lt;!-- General --&gt;
  &lt;default ident="modelIdentCode" value="S1000DTOOLS"/&gt;
  &lt;default ident="securityClassification" value="01"/&gt;
  [...]
&lt;/defaults&gt;</verbatimText>
          </para>
        </levelledPara>
        <levelledPara>
          <title>'dmtypes' file</title>
          <para>This file sets the default type (schema) for data modules based on their info code. By default, the program will search the current directory for a file named 'dmtypes', but any file can be specified by using the -D option.</para>
          <para>Each line consists of an info code, a schema identifier, and optionally a default info name. Example:</para>
          <para>
            <verbatimText verbatimStyle="vs23">00E    comrep
00W    appliccrossreftable
009    frontmatter
022    brex
024    brdoc
040    descript    Description
520    proced      Remove procedure</verbatimText>
          </para>
          <para>Like the 'defaults' file, the 'dmtypes' file may also be written in an XML format, where each child has an attribute <verbatimText verbatimStyle="vs13">infoCode</verbatimText> and an attribute <verbatimText verbatimStyle="vs13">schema</verbatimText>.</para>
          <para>
            <verbatimText verbatimStyle="vs23">&lt;?xml version="1.0"&gt;
&lt;dmtypes&gt;
  &lt;type infoCode="022" schema="brex"/&gt;
  &lt;type infoCode="040" schema="descript" infoName="Description"/&gt;
  &lt;type infoCode="520" schema="proced" infoName="Remove procedure"/&gt;
&lt;/dmtypes&gt;</verbatimText>
          </para>
          <para>Info code variants can also be given specific default schema and info names. To do this, include the variant with the info code:</para>
          <para>
            <verbatimText verbatimStyle="vs23">258A  proced  Other procedure to clean
258B  proced  Other procedure to clean, Clean with air
258C  proced  Other procedure to clean, Clean with water</verbatimText>
          </para>
          <para>The two forms of info codes (with and without variant) can be mixed. Defaults are chosen in the order they are listed in the 'dmtypes' file. An info code with no variant matches all possible variants.</para>
        </levelledPara>
      </levelledPara>
      <levelledPara>
        <title>Example</title>
        <para>s1kd-newdm -# S1000DTOOLS-A-00-07-00-00A-040A-D -T descript</para>
      </levelledPara>
    </description>
  </content>
</dmodule>
